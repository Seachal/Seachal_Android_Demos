<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript è°ƒç”¨ Android è¿”å›å€¼æµ‹è¯•</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'PingFang SC', 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 25px;
            font-size: 22px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .test-section {
            background: rgba(255,255,255,0.15);
            margin: 15px 0;
            padding: 20px;
            border-radius: 12px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .test-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 12px;
            color: #fff;
        }
        
        .test-description {
            font-size: 13px;
            margin-bottom: 15px;
            color: rgba(255,255,255,0.8);
            line-height: 1.4;
        }
        
        .button-group {
            margin: 10px 0;
        }
        
        .btn {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            padding: 10px 18px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            margin: 5px 3px;
            font-size: 13px;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            min-width: 100px;
        }
        
        .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn-primary { background: linear-gradient(45deg, #2196F3, #1976D2); }
        .btn-success { background: linear-gradient(45deg, #4CAF50, #388E3C); }
        .btn-warning { background: linear-gradient(45deg, #FF9800, #F57C00); }
        .btn-danger { background: linear-gradient(45deg, #F44336, #D32F2F); }
        .btn-info { background: linear-gradient(45deg, #00BCD4, #0097A7); }
        
        .result-box {
            background: rgba(0,0,0,0.4);
            padding: 12px;
            border-radius: 8px;
            margin: 10px 0;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 12px;
            border: 1px solid rgba(255,255,255,0.3);
            white-space: pre-wrap;
            word-break: break-all;
            min-height: 40px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .input-group {
            margin: 10px 0;
        }
        
        .input-group input, 
        .input-group select {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            border: none;
            border-radius: 6px;
            background: rgba(255,255,255,0.9);
            color: #333;
            font-size: 14px;
        }
        
        .status {
            padding: 8px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            display: inline-block;
            margin: 5px 0;
        }
        
        .status-success { background: #4CAF50; color: white; }
        .status-error { background: #F44336; color: white; }
        .status-info { background: #2196F3; color: white; }
        .status-warning { background: #FF9800; color: white; }
        
        .log-box {
            background: rgba(0,0,0,0.6);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 11px;
            border: 1px solid rgba(255,255,255,0.3);
            max-height: 300px;
            overflow-y: auto;
        }
        
        .summary-stats {
            display: flex;
            justify-content: space-around;
            margin: 15px 0;
            text-align: center;
        }
        
        .stat-item {
            background: rgba(255,255,255,0.2);
            padding: 10px;
            border-radius: 8px;
            flex: 1;
            margin: 0 5px;
        }
        
        .stat-value {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 12px;
            opacity: 0.8;
        }
        
        .highlight {
            background: rgba(255,255,0,0.3);
            padding: 2px 4px;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš€ JavaScript è°ƒç”¨ Android è¿”å›å€¼æµ‹è¯•</h1>
        
        <!-- æ¥å£å¯ç”¨æ€§æ£€æŸ¥ -->
        <div class="test-section">
            <div class="test-title">ğŸ”§ æ¥å£å¯ç”¨æ€§æ£€æŸ¥</div>
            <div class="test-description">é¦–å…ˆæ£€æŸ¥Android JavaScriptæ¥å£æ˜¯å¦æ­£ç¡®æ³¨å…¥</div>
            <div class="button-group">
                <button class="btn btn-info" onclick="checkInterface()">æ£€æŸ¥æ¥å£</button>
                <button class="btn btn-warning" onclick="clearAllResults()">æ¸…ç©ºæ‰€æœ‰ç»“æœ</button>
            </div>
            <div class="result-box" id="interfaceResult">ç­‰å¾…æ£€æŸ¥...</div>
        </div>
        
        <!-- åŸºæœ¬ç±»å‹è¿”å›å€¼æµ‹è¯• -->
        <div class="test-section">
            <div class="test-title">ğŸ“Š åŸºæœ¬ç±»å‹è¿”å›å€¼æµ‹è¯•</div>
            <div class="test-description">æµ‹è¯• Boolean, Integer, String ç­‰åŸºæœ¬ç±»å‹çš„è¿”å›å€¼</div>
            <div class="button-group">
                <button class="btn btn-success" onclick="testBasicTypes()">æµ‹è¯•åŸºæœ¬ç±»å‹</button>
                <button class="btn btn-primary" onclick="testBooleanReturn()">å¸ƒå°”å€¼</button>
                <button class="btn btn-primary" onclick="testIntReturn()">æ•´æ•°</button>
                <button class="btn btn-primary" onclick="testStringReturn()">å­—ç¬¦ä¸²</button>
            </div>
            <div class="result-box" id="basicTypesResult">ç‚¹å‡»æŒ‰é’®å¼€å§‹æµ‹è¯•...</div>
        </div>
        
        <!-- JSON è¿”å›å€¼æµ‹è¯• -->
        <div class="test-section">
            <div class="test-title">ğŸ“¦ JSON å¯¹è±¡è¿”å›å€¼æµ‹è¯•</div>
            <div class="test-description">æµ‹è¯•å¤æ‚JSONå¯¹è±¡çš„è¿”å›å’Œè§£æ</div>
            <div class="button-group">
                <button class="btn btn-info" onclick="testJsonReturn()">æµ‹è¯•JSONè¿”å›</button>
                <button class="btn btn-info" onclick="testDeviceInfo()">è·å–è®¾å¤‡ä¿¡æ¯</button>
            </div>
            <div class="result-box" id="jsonResult">ç‚¹å‡»æŒ‰é’®å¼€å§‹æµ‹è¯•...</div>
        </div>
        
        <!-- åº”ç”¨æ£€æŸ¥æµ‹è¯• -->
        <div class="test-section">
            <div class="test-title">ğŸ“± åº”ç”¨å®‰è£…æ£€æŸ¥æµ‹è¯•</div>
            <div class="test-description">å®é™…ä¸šåŠ¡åœºæ™¯ï¼šæ£€æŸ¥åº”ç”¨æ˜¯å¦å®‰è£…ï¼ˆè¿”å›å¸ƒå°”å€¼ï¼‰</div>
            <div class="input-group">
                <input type="text" id="packageInput" placeholder="è¾“å…¥åº”ç”¨åŒ…å..." value="com.tencent.mm">
            </div>
            <div class="button-group">
                <button class="btn btn-success" onclick="testAppInstallCheck()">æ£€æŸ¥åº”ç”¨</button>
            </div>
            <div class="result-box" id="appCheckResult">è¾“å…¥åŒ…ååç‚¹å‡»æ£€æŸ¥...</div>
        </div>
        
        <!-- ç»¼åˆæµ‹è¯• -->
        <div class="test-section">
            <div class="test-title">ğŸ¯ ç»¼åˆæµ‹è¯•ä¸ç»“è®º</div>
            <div class="test-description">ä¸€é”®æ‰§è¡Œæ‰€æœ‰æµ‹è¯•ï¼ŒéªŒè¯è¿”å›å€¼åŠŸèƒ½çš„å®Œæ•´æ€§</div>
            <div class="button-group">
                <button class="btn btn-primary" onclick="runAllTests()">è¿è¡Œæ‰€æœ‰æµ‹è¯•</button>
                <button class="btn btn-success" onclick="generateReport()">ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š</button>
            </div>
            
            <!-- æµ‹è¯•ç»Ÿè®¡ -->
            <div class="summary-stats">
                <div class="stat-item">
                    <div class="stat-value" id="totalTests">0</div>
                    <div class="stat-label">æ€»æµ‹è¯•æ•°</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="successTests">0</div>
                    <div class="stat-label">æˆåŠŸ</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="failedTests">0</div>
                    <div class="stat-label">å¤±è´¥</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="testTime">0ms</div>
                    <div class="stat-label">æ€»è€—æ—¶</div>
                </div>
            </div>
            
            <div class="result-box" id="comprehensiveResult">ç‚¹å‡»æŒ‰é’®å¼€å§‹ç»¼åˆæµ‹è¯•...</div>
        </div>
        
        <!-- å®æ—¶æ—¥å¿— -->
        <div class="test-section">
            <div class="test-title">ğŸ“ å®æ—¶æµ‹è¯•æ—¥å¿—</div>
            <div class="test-description">è®°å½•æ‰€æœ‰æµ‹è¯•æ“ä½œå’Œç»“æœçš„è¯¦ç»†æ—¥å¿—</div>
            <div class="button-group">
                <button class="btn btn-warning" onclick="clearLog()">æ¸…ç©ºæ—¥å¿—</button>
            </div>
            <div class="log-box" id="testLog">ç­‰å¾…æµ‹è¯•æ“ä½œ...</div>
        </div>
    </div>

    <script>
        // ================================
        // å…¨å±€å˜é‡å’Œå·¥å…·å‡½æ•°
        // ================================
        
        let testStats = {
            total: 0,
            success: 0,
            failed: 0,
            startTime: 0
        };
        
        let logCount = 0;
        
        // æ·»åŠ æ—¥å¿—
        function addLog(message, type = 'INFO') {
            const timestamp = new Date().toLocaleTimeString();
            logCount++;
            const logElement = document.getElementById('testLog');
            const typeColor = {
                'INFO': '#00BCD4',
                'SUCCESS': '#4CAF50', 
                'ERROR': '#F44336',
                'WARNING': '#FF9800'
            }[type] || '#FFFFFF';
            
            const newLog = `<span style="color: ${typeColor}">[${logCount}] ${timestamp} [${type}]</span> ${message}\n`;
            logElement.innerHTML = newLog + logElement.innerHTML;
            
            console.log(`[${type}] ${message}`);
        }
        
        // æ›´æ–°ç»Ÿè®¡æ•°æ®
        function updateStats() {
            document.getElementById('totalTests').textContent = testStats.total;
            document.getElementById('successTests').textContent = testStats.success;
            document.getElementById('failedTests').textContent = testStats.failed;
            document.getElementById('testTime').textContent = 
                testStats.startTime > 0 ? (Date.now() - testStats.startTime) + 'ms' : '0ms';
        }
        
        // æ‰§è¡Œæµ‹è¯•å¹¶è®°å½•ç»“æœ
        function executeTest(testName, testFunction) {
            addLog(`å¼€å§‹æ‰§è¡Œæµ‹è¯•: ${testName}`, 'INFO');
            testStats.total++;
            
            try {
                const result = testFunction();
                testStats.success++;
                addLog(`âœ… ${testName} æµ‹è¯•æˆåŠŸ`, 'SUCCESS');
                updateStats();
                return result;
            } catch (error) {
                testStats.failed++;
                addLog(`âŒ ${testName} æµ‹è¯•å¤±è´¥: ${error.message}`, 'ERROR');
                updateStats();
                throw error;
            }
        }
        
        // ================================
        // æ¥å£æ£€æŸ¥å‡½æ•°
        // ================================
        
        function checkInterface() {
            const result = document.getElementById('interfaceResult');
            
            addLog('æ£€æŸ¥ Android JavaScript æ¥å£...', 'INFO');
            
            if (typeof window.ReturnTestAPI === 'undefined') {
                const errorMsg = 'âŒ ReturnTestAPI æ¥å£æœªæ‰¾åˆ°ï¼\n\nå¯èƒ½åŸå› :\n1. JavaScriptæœªå¯ç”¨\n2. æ¥å£æœªæ­£ç¡®æ³¨å…¥\n3. é¡µé¢åŠ è½½æœªå®Œæˆ';
                result.textContent = errorMsg;
                addLog('æ¥å£æ£€æŸ¥å¤±è´¥: ReturnTestAPI æœªæ‰¾åˆ°', 'ERROR');
                return false;
            }
            
            // æ£€æŸ¥æ¥å£ä¸­çš„æ–¹æ³•
            const methods = [
                'testBooleanReturn', 'testIntReturn', 'testStringReturn',
                'testJsonReturn', 'checkAppInstalled', 'getDeviceInfo', 'showToast'
            ];
            
            let availableMethods = [];
            let missingMethods = [];
            
            methods.forEach(method => {
                if (typeof window.ReturnTestAPI[method] === 'function') {
                    availableMethods.push(method);
                } else {
                    missingMethods.push(method);
                }
            });
            
            const successMsg = `âœ… ReturnTestAPI æ¥å£æ£€æŸ¥æˆåŠŸï¼\n\n` +
                `å¯ç”¨æ–¹æ³• (${availableMethods.length}/${methods.length}):\n${availableMethods.join(', ')}\n\n` +
                (missingMethods.length > 0 ? `ç¼ºå¤±æ–¹æ³•:\n${missingMethods.join(', ')}\n\n` : '') +
                `ğŸ¯ æ¥å£å·²å°±ç»ªï¼Œå¯ä»¥å¼€å§‹æµ‹è¯• JavaScript è·å– Android æ–¹æ³•è¿”å›å€¼ï¼`;
            
            result.textContent = successMsg;
            addLog(`æ¥å£æ£€æŸ¥æˆåŠŸ: ${availableMethods.length}/${methods.length} ä¸ªæ–¹æ³•å¯ç”¨`, 'SUCCESS');
            return true;
        }
        
        // ================================
        // åŸºæœ¬ç±»å‹æµ‹è¯•å‡½æ•°  
        // ================================
        
        function testBooleanReturn() {
            return executeTest('å¸ƒå°”å€¼è¿”å›', () => {
                const result = window.ReturnTestAPI.testBooleanReturn();
                document.getElementById('basicTypesResult').textContent = 
                    `âœ… å¸ƒå°”å€¼æµ‹è¯•æˆåŠŸï¼\nè¿”å›å€¼: ${result}\nç±»å‹: ${typeof result}`;
                return result;
            });
        }
        
        function testIntReturn() {
            return executeTest('æ•´æ•°è¿”å›', () => {
                const result = window.ReturnTestAPI.testIntReturn();
                document.getElementById('basicTypesResult').textContent = 
                    `âœ… æ•´æ•°æµ‹è¯•æˆåŠŸï¼\nè¿”å›å€¼: ${result}\nç±»å‹: ${typeof result}`;
                return result;
            });
        }
        
        function testStringReturn() {
            return executeTest('å­—ç¬¦ä¸²è¿”å›', () => {
                const result = window.ReturnTestAPI.testStringReturn();
                document.getElementById('basicTypesResult').textContent = 
                    `âœ… å­—ç¬¦ä¸²æµ‹è¯•æˆåŠŸï¼\nè¿”å›å€¼: ${result}\nç±»å‹: ${typeof result}\né•¿åº¦: ${result.length}`;
                return result;
            });
        }
        
        function testBasicTypes() {
            addLog('å¼€å§‹åŸºæœ¬ç±»å‹æ‰¹é‡æµ‹è¯•...', 'INFO');
            
            try {
                const boolResult = window.ReturnTestAPI.testBooleanReturn();
                const intResult = window.ReturnTestAPI.testIntReturn();
                const stringResult = window.ReturnTestAPI.testStringReturn();
                
                const summary = `âœ… åŸºæœ¬ç±»å‹æ‰¹é‡æµ‹è¯•æˆåŠŸï¼\n\n` +
                    `ğŸ“ å¸ƒå°”å€¼: ${boolResult} (${typeof boolResult})\n` +
                    `ğŸ“ æ•´æ•°: ${intResult} (${typeof intResult})\n` +
                    `ğŸ“ å­—ç¬¦ä¸²: ${stringResult} (${typeof stringResult})\n\n` +
                    `ğŸ¯ ç»“è®º: JavaScript å¯ä»¥æ­£ç¡®è·å– Android æ–¹æ³•çš„åŸºæœ¬ç±»å‹è¿”å›å€¼ï¼`;
                
                document.getElementById('basicTypesResult').textContent = summary;
                
                testStats.total += 3;
                testStats.success += 3;
                updateStats();
                addLog('åŸºæœ¬ç±»å‹æ‰¹é‡æµ‹è¯•å…¨éƒ¨æˆåŠŸ', 'SUCCESS');
            } catch (error) {
                testStats.total += 3;
                testStats.failed += 3;
                updateStats();
                addLog(`åŸºæœ¬ç±»å‹æµ‹è¯•å¤±è´¥: ${error.message}`, 'ERROR');
            }
        }
        
        // ================================
        // JSON æµ‹è¯•å‡½æ•°
        // ================================
        
        function testJsonReturn() {
            return executeTest('JSONè¿”å›', () => {
                const jsonString = window.ReturnTestAPI.testJsonReturn();
                const jsonObject = JSON.parse(jsonString);
                
                const result = `âœ… JSON æµ‹è¯•æˆåŠŸï¼\n\n` +
                    `ğŸ“¦ åŸå§‹è¿”å› (String): ${typeof jsonString}\n` +
                    `ğŸ“¦ è§£æåå¯¹è±¡ (Object): ${typeof jsonObject}\n\n` +
                    `ğŸ“ JSON å†…å®¹:\n${JSON.stringify(jsonObject, null, 2)}\n\n` +
                    `ğŸ¯ ç»“è®º: å¯ä»¥è¿”å›å¤æ‚ JSON æ•°æ®å¹¶æ­£ç¡®è§£æï¼`;
                
                document.getElementById('jsonResult').textContent = result;
                return jsonObject;
            });
        }
        
        function testDeviceInfo() {
            return executeTest('è®¾å¤‡ä¿¡æ¯è·å–', () => {
                const deviceInfoString = window.ReturnTestAPI.getDeviceInfo();
                const deviceInfo = JSON.parse(deviceInfoString);
                
                const result = `âœ… è®¾å¤‡ä¿¡æ¯è·å–æˆåŠŸï¼\n\n` +
                    `ğŸ“± åˆ¶é€ å•†: ${deviceInfo.manufacturer}\n` +
                    `ğŸ“± å‹å·: ${deviceInfo.model}\n` +
                    `ğŸ“± Androidç‰ˆæœ¬: ${deviceInfo.version}\n` +
                    `ğŸ“± SDKç‰ˆæœ¬: ${deviceInfo.sdk}\n` +
                    `ğŸ“± æ—¶é—´æˆ³: ${new Date(deviceInfo.timestamp).toLocaleString()}\n\n` +
                    `ğŸ¯ å®é™…ä¸šåŠ¡æ•°æ®è·å–æˆåŠŸï¼`;
                
                document.getElementById('jsonResult').textContent = result;
                return deviceInfo;
            });
        }
        
        // ================================
        // åº”ç”¨æ£€æŸ¥æµ‹è¯•å‡½æ•°
        // ================================
        
        function testAppInstallCheck() {
            const packageName = document.getElementById('packageInput').value.trim();
            if (!packageName) {
                alert('è¯·è¾“å…¥åº”ç”¨åŒ…å');
                return;
            }
            
            return executeTest('åº”ç”¨å®‰è£…æ£€æŸ¥', () => {
                const isInstalled = window.ReturnTestAPI.checkAppInstalled(packageName);
                
                const result = `âœ… åº”ç”¨å®‰è£…æ£€æŸ¥å®Œæˆï¼\n\n` +
                    `ğŸ“± åŒ…å: ${packageName}\n` +
                    `ğŸ“± å®‰è£…çŠ¶æ€: ${isInstalled ? 'âœ… å·²å®‰è£…' : 'âŒ æœªå®‰è£…'}\n` +
                    `ğŸ“± è¿”å›ç±»å‹: ${typeof isInstalled}\n\n` +
                    `ğŸ¯ å®é™…ä¸šåŠ¡åœºæ™¯è¿”å›å€¼è·å–æˆåŠŸï¼`;
                
                document.getElementById('appCheckResult').textContent = result;
                return isInstalled;
            });
        }
        
        // ================================
        // ç»¼åˆæµ‹è¯•å‡½æ•°
        // ================================
        
        function runAllTests() {
            addLog('ğŸš€ å¼€å§‹è¿è¡Œæ‰€æœ‰æµ‹è¯•...', 'INFO');
            testStats = { total: 0, success: 0, failed: 0, startTime: Date.now() };
            
            const tests = [
                () => checkInterface(),
                () => testBasicTypes(),
                () => testJsonReturn(),
                () => testDeviceInfo(),
                () => testAppInstallCheck()
            ];
            
            let allResults = [];
            
            tests.forEach((test, index) => {
                try {
                    const result = test();
                    allResults.push(`âœ… æµ‹è¯• ${index + 1}: æˆåŠŸ`);
                } catch (error) {
                    allResults.push(`âŒ æµ‹è¯• ${index + 1}: å¤±è´¥ - ${error.message}`);
                }
            });
            
            const totalTime = Date.now() - testStats.startTime;
            const successRate = testStats.total > 0 ? ((testStats.success / testStats.total) * 100).toFixed(1) : '0';
            
            const summary = `ğŸ‰ æ‰€æœ‰æµ‹è¯•æ‰§è¡Œå®Œæˆï¼\n\n` +
                `ğŸ“Š æµ‹è¯•ç»Ÿè®¡:\n` +
                `   â€¢ æ€»æµ‹è¯•æ•°: ${testStats.total}\n` +
                `   â€¢ æˆåŠŸ: ${testStats.success}\n` +
                `   â€¢ å¤±è´¥: ${testStats.failed}\n` +
                `   â€¢ æˆåŠŸç‡: ${successRate}%\n` +
                `   â€¢ æ€»è€—æ—¶: ${totalTime}ms\n\n` +
                `ğŸ“‹ æµ‹è¯•ç»“æœ:\n${allResults.join('\n')}\n\n` +
                `ğŸ¯ æœ€ç»ˆç»“è®º:\n` +
                `âœ… JavaScript **å®Œå…¨å¯ä»¥**è·å– Android æ–¹æ³•çš„è¿”å›å€¼ï¼\n` +
                `âœ… æ”¯æŒåŸºæœ¬ç±»å‹: Boolean, Integer, String\n` +
                `âœ… æ”¯æŒå¤æ‚æ•°æ®: JSON å­—ç¬¦ä¸²\n` +
                `âš ï¸ æ³¨æ„: æ–¹æ³•è°ƒç”¨æ˜¯åŒæ­¥çš„ï¼Œä¼šé˜»å¡ JS çº¿ç¨‹\n\n` +
                `ğŸ“¢ æ‚¨åŒäº‹çš„è¯´æ³•æ˜¯é”™è¯¯çš„ï¼è¿”å›å€¼å®Œå…¨å¯ä»¥è·å–ï¼`;
            
            document.getElementById('comprehensiveResult').textContent = summary;
            updateStats();
            addLog(`æ‰€æœ‰æµ‹è¯•å®Œæˆï¼ŒæˆåŠŸç‡: ${successRate}%`, 'SUCCESS');
        }
        
        function generateReport() {
            const report = {
                timestamp: new Date().toISOString(),
                environment: {
                    userAgent: navigator.userAgent,
                    platform: navigator.platform,
                    language: navigator.language
                },
                testResults: {
                    total: testStats.total,
                    success: testStats.success,
                    failed: testStats.failed,
                    successRate: testStats.total > 0 ? ((testStats.success / testStats.total) * 100).toFixed(1) + '%' : '0%',
                    totalTime: testStats.startTime > 0 ? (Date.now() - testStats.startTime) + 'ms' : '0ms'
                },
                conclusion: {
                    canGetReturnValue: testStats.success > 0,
                    supportedTypes: ['Boolean', 'Integer', 'String', 'JSON'],
                    isSync: true,
                    recommendation: 'JavaScript å®Œå…¨æ”¯æŒè·å– Android æ–¹æ³•è¿”å›å€¼'
                }
            };
            
            const reportText = `ğŸ“‹ JavaScript è°ƒç”¨ Android è¿”å›å€¼æµ‹è¯•æŠ¥å‘Š\n\n` +
                `â° ç”Ÿæˆæ—¶é—´: ${new Date().toLocaleString()}\n` +
                `ğŸŒ æµ‹è¯•ç¯å¢ƒ: ${navigator.userAgent}\n\n` +
                `ğŸ“Š æµ‹è¯•ç»“æœç»Ÿè®¡:\n` +
                `   â€¢ æ€»æµ‹è¯•æ•°: ${report.testResults.total}\n` +
                `   â€¢ æˆåŠŸæµ‹è¯•: ${report.testResults.success}\n` +
                `   â€¢ å¤±è´¥æµ‹è¯•: ${report.testResults.failed}\n` +
                `   â€¢ æˆåŠŸç‡: ${report.testResults.successRate}\n` +
                `   â€¢ æ€»è€—æ—¶: ${report.testResults.totalTime}\n\n` +
                `âœ… æµ‹è¯•ç»“è®º:\n` +
                `   â€¢ å¯ä»¥è·å–è¿”å›å€¼: ${report.conclusion.canGetReturnValue ? 'æ˜¯' : 'å¦'}\n` +
                `   â€¢ æ”¯æŒçš„ç±»å‹: ${report.conclusion.supportedTypes.join(', ')}\n` +
                `   â€¢ æ˜¯å¦åŒæ­¥æ‰§è¡Œ: ${report.conclusion.isSync ? 'æ˜¯' : 'å¦'}\n` +
                `   â€¢ å»ºè®®: ${report.conclusion.recommendation}\n\n` +
                `ğŸ¯ æœ€ç»ˆç­”æ¡ˆ: æ‚¨åŒäº‹çš„è¯´æ³•æ˜¯é”™è¯¯çš„ï¼\n` +
                `JavaScript å®Œå…¨å¯ä»¥è·å– Android @JavascriptInterface æ–¹æ³•çš„è¿”å›å€¼ï¼`;
            
            document.getElementById('comprehensiveResult').textContent = reportText;
            addLog('æµ‹è¯•æŠ¥å‘Šç”Ÿæˆå®Œæˆ', 'SUCCESS');
            
            // å°è¯•è°ƒç”¨ Android æ˜¾ç¤º Toast
            try {
                window.ReturnTestAPI.showToast('æµ‹è¯•æŠ¥å‘Šå·²ç”Ÿæˆï¼');
            } catch (error) {
                console.log('æ— æ³•è°ƒç”¨ Android Toast:', error);
            }
        }
        
        // ================================
        // å·¥å…·å‡½æ•°
        // ================================
        
        function clearAllResults() {
            const resultElements = [
                'interfaceResult', 'basicTypesResult', 'jsonResult', 
                'appCheckResult', 'comprehensiveResult'
            ];
            
            resultElements.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.textContent = 'å·²æ¸…ç©ºï¼Œç­‰å¾…æ–°çš„æµ‹è¯•...';
                }
            });
            
            clearLog();
            testStats = { total: 0, success: 0, failed: 0, startTime: 0 };
            updateStats();
            addLog('æ‰€æœ‰ç»“æœå·²æ¸…ç©º', 'INFO');
        }
        
        function clearLog() {
            document.getElementById('testLog').innerHTML = 'ç­‰å¾…æµ‹è¯•æ“ä½œ...';
            logCount = 0;
        }
        
        // ================================
        // é¡µé¢åˆå§‹åŒ–
        // ================================
        
        // Android å°±ç»ªå›è°ƒï¼ˆä¾› Android è°ƒç”¨ï¼‰
        window.onAndroidReady = function() {
            addLog('Android è°ƒç”¨ JavaScript: onAndroidReady()', 'SUCCESS');
            addLog('åŒå‘é€šä¿¡æµ‹è¯•æˆåŠŸï¼', 'SUCCESS');
            
            // è‡ªåŠ¨æ‰§è¡Œæ¥å£æ£€æŸ¥
            setTimeout(() => {
                checkInterface();
            }, 500);
        };
        
        // é¡µé¢åŠ è½½å®Œæˆ
        window.onload = function() {
            addLog('HTML é¡µé¢åŠ è½½å®Œæˆ', 'INFO');
            addLog('å‡†å¤‡è¿›è¡Œ JavaScript è°ƒç”¨ Android è¿”å›å€¼æµ‹è¯•...', 'INFO');
            
            // è‡ªåŠ¨æ£€æŸ¥æ¥å£ï¼ˆå¦‚æœ Android è¿˜æœªè°ƒç”¨ onAndroidReadyï¼‰
            setTimeout(() => {
                if (logCount < 3) { // å¦‚æœè¿˜æ²¡æœ‰å¤ªå¤šæ—¥å¿—ï¼Œè¯´æ˜ Android å¯èƒ½æ²¡æœ‰è°ƒç”¨
                    checkInterface();
                }
            }, 2000);
        };
        
        // é”™è¯¯å¤„ç†
        window.onerror = function(message, source, lineno, colno, error) {
            addLog(`JavaScript é”™è¯¯: ${message} (${source}:${lineno})`, 'ERROR');
        };
        
        console.log('ğŸš€ JavaScript è°ƒç”¨ Android è¿”å›å€¼æµ‹è¯•é¡µé¢å·²å°±ç»ªï¼');
    </script>
</body>
</html> 