# ğŸš€ GridLayoutManager å¼€å‘è§„åˆ™å¿«é€Ÿå‚è€ƒ

## ğŸ“ å‘½åè§„åˆ™
```java
// Activityå‘½åï¼šåŠŸèƒ½+Demo+Activity
GridLayoutManagerDemoActivity

// å˜é‡å‘½åï¼šå®Œæ•´è‹±æ–‡å•è¯ï¼Œé©¼å³°å‘½å
private int horizontalSpacing;
private int verticalSpacing;

// å¸¸é‡å‘½åï¼šå¤§å†™å­—æ¯+ä¸‹åˆ’çº¿
public static final int TYPE_BASIC = 1;
```

## ğŸ¯ ItemDecorationå¿…æ£€é¡¹
```java
@Override
public void getItemOffsets(@NonNull Rect outRect, @NonNull View view,
                          @NonNull RecyclerView parent, @NonNull RecyclerView.State state) {
    // âœ… 1. è¾¹ç•Œæ£€æŸ¥
    GridLayoutManager layoutManager = (GridLayoutManager) parent.getLayoutManager();
    if (layoutManager == null) return;
    
    // âœ… 2. ä½ç½®éªŒè¯
    int position = parent.getChildAdapterPosition(view);
    if (position == RecyclerView.NO_POSITION) return;
    
    // âœ… 3. æ¸…æ™°çš„ä½ç½®è®¡ç®—
    int spanCount = layoutManager.getSpanCount();
    int column = position % spanCount;
    int row = position / spanCount;
    
    // âœ… 4. é—´è·è®¡ç®—é€»è¾‘æ³¨é‡Š
    // è®¡ç®—æ°´å¹³é—´è·...
}
```

## ğŸ”§ æ ¸å¿ƒç®—æ³•æ¨¡æ¿

### å‡åˆ†é—´è·ç®—æ³•
```java
// é€‚ç”¨äºå¤§å¤šæ•°åœºæ™¯çš„é—´è·åˆ†é…
outRect.left = column * horizontalSpacing / spanCount;
outRect.right = horizontalSpacing - (column + 1) * horizontalSpacing / spanCount;
```

### ç²¾ç¡®æ§åˆ¶ç®—æ³•
```java
// é€‚ç”¨äºä¸¥æ ¼è®¾è®¡è¦æ±‚çš„é—´è·æ§åˆ¶
if (column == 0) {
    outRect.left = edgeMargin;
    outRect.right = horizontalSpacing / 2;
} else if (column == spanCount - 1) {
    outRect.left = horizontalSpacing / 2;
    outRect.right = edgeMargin;
} else {
    outRect.left = horizontalSpacing / 2;
    outRect.right = horizontalSpacing / 2;
}
```

## ğŸš« å¸¸è§é”™è¯¯é¿å…

### âŒ é¿å…ç¡¬ç¼–ç 
```java
// é”™è¯¯
int column = position % 2; // ç¡¬ç¼–ç spanæ•°é‡
outRect.left = 16; // ç¡¬ç¼–ç é—´è·

// æ­£ç¡®
int column = position % spanCount;
outRect.left = dpToPx(16);
```

### âŒ é¿å…æ— è¾¹ç•Œæ£€æŸ¥
```java
// é”™è¯¯
GridLayoutManager layoutManager = (GridLayoutManager) parent.getLayoutManager();
int position = parent.getChildAdapterPosition(view);
// ç›´æ¥ä½¿ç”¨ï¼Œå¯èƒ½NPE

// æ­£ç¡®
if (layoutManager == null) return;
if (position == RecyclerView.NO_POSITION) return;
```

### âŒ é¿å…æ€§èƒ½é—®é¢˜
```java
// é”™è¯¯ï¼šæ¯æ¬¡éƒ½é‡æ–°è®¡ç®—
public void getItemOffsets(...) {
    // å¤æ‚è®¡ç®—é€»è¾‘
}

// æ­£ç¡®ï¼šç¼“å­˜è®¡ç®—ç»“æœ
private final SparseArray<Rect> offsetCache = new SparseArray<>();
```

## âš¡ æ€§èƒ½ä¼˜åŒ–æ¸…å•
- [ ] ä½¿ç”¨ç¼“å­˜é¿å…é‡å¤è®¡ç®—
- [ ] ç”¨finalä¿®é¥°ä¸å˜çš„å˜é‡
- [ ] é¿å…åœ¨getItemOffsetsä¸­åˆ›å»ºå¯¹è±¡
- [ ] åŠæ—¶æ¸…ç†ItemDecoration
- [ ] ç›‘æ§å†…å­˜ä½¿ç”¨æƒ…å†µ

## ğŸ“‹ æäº¤å‰æ£€æŸ¥æ¸…å•
- [ ] æ‰€æœ‰å˜é‡æ–¹æ³•å‘½åè§„èŒƒ
- [ ] å…³é”®ä»£ç æœ‰æ³¨é‡Šè¯´æ˜
- [ ] è¿›è¡Œäº†è¾¹ç•Œæ£€æŸ¥
- [ ] æ²¡æœ‰ç¡¬ç¼–ç æ•°å€¼
- [ ] è€ƒè™‘äº†æ€§èƒ½ä¼˜åŒ–
- [ ] ç¼–å†™äº†æµ‹è¯•ç”¨ä¾‹
- [ ] æ›´æ–°äº†æ–‡æ¡£

## ğŸ¨ å¸ƒå±€æ–‡ä»¶è§„èŒƒ
```xml
<!-- IDå‘½åï¼šåŠŸèƒ½_ç±»å‹ -->
android:id="@+id/btn_basic"
android:id="@+id/recycler_view"

<!-- ä½¿ç”¨èµ„æºå¼•ç”¨ -->
android:textColor="@color/btn_text_color_selector"
android:background="@drawable/btn_selector"

<!-- é¿å…ç¡¬ç¼–ç  -->
<!-- âŒ android:textSize="12sp" -->
<!-- âœ… android:textSize="@dimen/button_text_size" -->
```

## ğŸ“š å¿…å¤‡æ³¨é‡Šæ¨¡æ¿
```java
/**
 * [ç±»çš„ç®€è¦æè¿°]
 * 
 * <p>å®ç°ç‰¹ç‚¹ï¼š
 * <ul>
 *   <li>ç‰¹ç‚¹1</li>
 *   <li>ç‰¹ç‚¹2</li>
 * </ul>
 * 
 * @author [ä½œè€…å]
 * @version [ç‰ˆæœ¬å·]
 * @since [åˆ›å»ºæ—¥æœŸ]
 */
```

---
**ğŸ’¡ è®°ä½ï¼šä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§æ¯”æ€§èƒ½æ›´é‡è¦ï¼** 